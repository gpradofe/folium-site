---
import Layout from '../layouts/Layout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

const tiers = [
  {
    name: "Free",
    monthlyPrice: 0,
    annualPrice: 0,
    period: "forever",
    desc: "For side projects and testing.",
    features: [
      "100 PDFs/month",
      "1 template",
      "Folium watermark",
      "Community support",
      "REST API access",
      "No credit card required",
    ],
    notIncluded: [
      "Custom fonts",
      "Priority rendering",
      "Webhooks",
    ],
    cta: "Start Free",
    ctaLink: "#",
    highlight: false,
  },
  {
    name: "Pro",
    monthlyPrice: 49,
    annualPrice: 39,
    period: "/mo",
    desc: "For growing teams and products.",
    features: [
      "10,000 PDFs/month",
      "Unlimited templates",
      "No watermark",
      "Email support (24h SLA)",
      "Priority rendering",
      "Custom fonts & branding",
      "Webhooks & async",
      "$0.005/PDF overage",
    ],
    notIncluded: [
      "SSO & SAML",
      "On-premise option",
    ],
    cta: "Start Free Trial",
    ctaLink: "#",
    highlight: true,
  },
  {
    name: "Enterprise",
    monthlyPrice: null,
    annualPrice: null,
    period: "",
    desc: "Unlimited scale, tailored to you.",
    features: [
      "Unlimited PDFs",
      "99.9% SLA guarantee",
      "Dedicated support engineer",
      "SSO & SAML",
      "Audit logs & compliance",
      "On-premise deployment",
      "Custom integrations",
      "Volume discounts",
    ],
    notIncluded: [],
    cta: "Contact Sales",
    ctaLink: "mailto:hello@folium.dev",
    highlight: false,
  },
];

const faqs = [
  {
    q: "What happens when I exceed my monthly limit?",
    a: "On the Free tier, additional requests return a 429 error. On Pro, you're charged $0.005 per additional PDF — no surprises, no service interruption.",
  },
  {
    q: "Can I switch plans at any time?",
    a: "Yes. Upgrade or downgrade anytime. When upgrading, you're prorated for the remainder of the billing cycle. Downgrades take effect at the next billing date.",
  },
  {
    q: "What does the Folium watermark look like?",
    a: "A small 'Generated by Folium' text in the footer of each PDF. It's removed on all paid plans.",
  },
  {
    q: "Do you offer annual billing?",
    a: "Yes! Save 20% with annual billing. Toggle the switch on the pricing cards above to see annual prices.",
  },
  {
    q: "How does Enterprise pricing work?",
    a: "Enterprise pricing is based on your volume, deployment needs, and support requirements. Contact us for a custom quote — we're flexible and fast.",
  },
  {
    q: "Is there a free trial for Pro?",
    a: "Yes. Start with our free tier, and when you're ready, Pro includes a 14-day free trial with full features.",
  },
];
---

<Layout title="Pricing — Folium PDF Engine" description="Simple, transparent pricing for Folium PDF generation. Free tier included. Scale as you grow.">
  <Nav />
  <main class="pt-24 pb-20">
    <!-- Hero -->
    <section class="max-w-6xl mx-auto px-6 text-center mb-20">
      <div class="animate-on-scroll">
        <span class="inline-block text-emerald-400 text-sm font-semibold tracking-wider uppercase mb-4">Pricing</span>
        <h1 class="text-4xl md:text-6xl font-extrabold mb-6">
          Simple, transparent <span class="gradient-text">pricing</span>
        </h1>
        <p class="text-lg md:text-xl text-slate-400 max-w-2xl mx-auto mb-8">
          Start free. Scale as you grow. No contracts, no surprises.
        </p>

        <!-- Billing Toggle -->
        <div class="inline-flex items-center gap-4 bg-slate-900/60 border border-slate-800 rounded-full px-2 py-2" id="billing-toggle">
          <button id="btn-monthly" class="px-5 py-2 rounded-full text-sm font-semibold transition bg-emerald-500 text-slate-950">
            Monthly
          </button>
          <button id="btn-annual" class="px-5 py-2 rounded-full text-sm font-semibold transition text-slate-400 hover:text-white">
            Annual <span class="text-emerald-400 text-xs ml-1">Save 20%</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Pricing Cards -->
    <section class="max-w-6xl mx-auto px-6 mb-24">
      <div class="grid md:grid-cols-3 gap-6 max-w-5xl mx-auto stagger-children">
        {tiers.map((t) => (
          <div class={`animate-on-scroll rounded-2xl p-8 flex flex-col transition-all duration-300 ${
            t.highlight
              ? 'bg-emerald-500/5 border-2 border-emerald-500/40 relative glow-emerald md:scale-[1.02]'
              : 'bg-slate-900/40 border border-slate-800 hover:border-slate-700'
          }`}>
            {t.highlight && (
              <div class="absolute -top-3.5 left-1/2 -translate-x-1/2 bg-emerald-500 text-slate-950 text-xs font-bold px-4 py-1 rounded-full uppercase tracking-wider">
                Most Popular
              </div>
            )}
            <h3 class="text-lg font-semibold mb-2">{t.name}</h3>
            <div class="flex items-baseline gap-1 mb-2">
              {t.monthlyPrice !== null ? (
                <>
                  <span class="text-5xl font-bold price-display" data-monthly={t.monthlyPrice} data-annual={t.annualPrice}>
                    ${t.monthlyPrice}
                  </span>
                  <span class="text-slate-500">{t.period}</span>
                </>
              ) : (
                <span class="text-5xl font-bold">Custom</span>
              )}
            </div>
            {t.annualPrice !== null && t.annualPrice > 0 && (
              <p class="text-sm text-emerald-400/70 mb-2 annual-savings hidden">
                ${t.annualPrice * 12}/year — save ${(t.monthlyPrice - t.annualPrice) * 12}/year
              </p>
            )}
            <p class="text-slate-500 text-sm mb-8">{t.desc}</p>

            <ul class="space-y-3 mb-6 flex-1">
              {t.features.map((f) => (
                <li class="flex items-start gap-3 text-sm text-slate-300">
                  <svg class="w-5 h-5 text-emerald-400 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M5 13l4 4L19 7"/></svg>
                  {f}
                </li>
              ))}
              {t.notIncluded.map((f) => (
                <li class="flex items-start gap-3 text-sm text-slate-600">
                  <svg class="w-5 h-5 text-slate-700 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M18 12H6"/></svg>
                  {f}
                </li>
              ))}
            </ul>

            <a href={t.ctaLink} class={`block text-center py-3.5 rounded-xl font-semibold transition ${
              t.highlight
                ? 'bg-emerald-500 hover:bg-emerald-400 text-slate-950 shadow-lg shadow-emerald-500/20'
                : 'border border-slate-700 hover:border-slate-500 text-slate-300'
            }`}>
              {t.cta}
            </a>
          </div>
        ))}
      </div>

      <!-- SmartDX callout -->
      <div class="mt-16 text-center animate-on-scroll">
        <div class="inline-flex items-center gap-3 bg-slate-900/50 border border-slate-800 rounded-xl px-6 py-4 text-sm flex-wrap justify-center">
          <span class="text-slate-500">Switching from SmartDX?</span>
          <span class="text-white font-semibold">Save $899,700+/year.</span>
          <span class="text-emerald-400">That's not a typo.</span>
        </div>
      </div>
    </section>

    <!-- Comparison Table -->
    <section class="max-w-4xl mx-auto px-6 mb-24">
      <div class="animate-on-scroll text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Compare <span class="gradient-text">plans</span></h2>
        <p class="text-slate-400">Everything you need to know at a glance.</p>
      </div>
      <div class="animate-on-scroll overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-slate-800">
              <th class="text-left py-4 pr-4 text-slate-400 font-medium">Feature</th>
              <th class="text-center py-4 px-4 text-slate-400 font-medium">Free</th>
              <th class="text-center py-4 px-4 text-emerald-400 font-medium">Pro</th>
              <th class="text-center py-4 px-4 text-slate-400 font-medium">Enterprise</th>
            </tr>
          </thead>
          <tbody class="text-slate-300">
            {[
              ["Monthly PDFs", "100", "10,000", "Unlimited"],
              ["Templates", "1", "Unlimited", "Unlimited"],
              ["Watermark", "Yes", "No", "No"],
              ["Custom fonts", "—", "✓", "✓"],
              ["Priority rendering", "—", "✓", "✓"],
              ["Webhooks & async", "—", "✓", "✓"],
              ["Support", "Community", "Email (24h)", "Dedicated"],
              ["SLA", "—", "—", "99.9%"],
              ["SSO & SAML", "—", "—", "✓"],
              ["Audit logs", "—", "—", "✓"],
              ["On-premise", "—", "—", "✓"],
            ].map(([feature, free, pro, ent]) => (
              <tr class="border-b border-slate-800/50">
                <td class="py-3 pr-4 text-slate-400">{feature}</td>
                <td class="py-3 px-4 text-center">{free}</td>
                <td class="py-3 px-4 text-center font-medium">{pro}</td>
                <td class="py-3 px-4 text-center">{ent}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </section>

    <!-- FAQ -->
    <section class="max-w-3xl mx-auto px-6 mb-24">
      <div class="animate-on-scroll text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Frequently asked <span class="gradient-text">questions</span></h2>
      </div>
      <div class="space-y-4 stagger-children">
        {faqs.map((faq) => (
          <details class="animate-on-scroll group bg-slate-900/40 border border-slate-800 rounded-xl overflow-hidden">
            <summary class="flex items-center justify-between cursor-pointer px-6 py-5 text-white font-medium hover:text-emerald-400 transition">
              {faq.q}
              <svg class="w-5 h-5 text-slate-500 group-open:rotate-180 transition-transform flex-shrink-0 ml-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M19 9l-7 7-7-7"/></svg>
            </summary>
            <div class="px-6 pb-5 text-slate-400 text-sm leading-relaxed">
              {faq.a}
            </div>
          </details>
        ))}
      </div>
    </section>

    <!-- CTA -->
    <section class="max-w-4xl mx-auto px-6 text-center">
      <div class="animate-on-scroll bg-gradient-to-br from-emerald-500/10 via-slate-900/50 to-teal-500/10 border border-emerald-500/20 rounded-3xl p-12 md:p-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Ready to generate PDFs at <span class="gradient-text">lightspeed</span>?</h2>
        <p class="text-slate-400 text-lg mb-8 max-w-xl mx-auto">Start with 100 free PDFs/month. No credit card required. Upgrade when you're ready.</p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="#" class="bg-emerald-500 hover:bg-emerald-400 text-slate-950 font-semibold px-8 py-4 rounded-xl transition shadow-lg shadow-emerald-500/20 text-lg">
            Start Free →
          </a>
          <a href="mailto:hello@folium.dev" class="border border-slate-700 hover:border-slate-500 text-slate-300 font-semibold px-8 py-4 rounded-xl transition text-lg">
            Talk to Sales
          </a>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<script>
  const btnMonthly = document.getElementById('btn-monthly');
  const btnAnnual = document.getElementById('btn-annual');
  const priceDisplays = document.querySelectorAll('.price-display');
  const annualSavings = document.querySelectorAll('.annual-savings');

  function setMonthly() {
    btnMonthly?.classList.add('bg-emerald-500', 'text-slate-950');
    btnMonthly?.classList.remove('text-slate-400');
    btnAnnual?.classList.remove('bg-emerald-500', 'text-slate-950');
    btnAnnual?.classList.add('text-slate-400');
    priceDisplays.forEach(el => {
      const m = (el as HTMLElement).dataset.monthly;
      el.textContent = `$${m}`;
    });
    annualSavings.forEach(el => el.classList.add('hidden'));
  }

  function setAnnual() {
    btnAnnual?.classList.add('bg-emerald-500', 'text-slate-950');
    btnAnnual?.classList.remove('text-slate-400');
    btnMonthly?.classList.remove('bg-emerald-500', 'text-slate-950');
    btnMonthly?.classList.add('text-slate-400');
    priceDisplays.forEach(el => {
      const a = (el as HTMLElement).dataset.annual;
      el.textContent = `$${a}`;
    });
    annualSavings.forEach(el => el.classList.remove('hidden'));
  }

  btnMonthly?.addEventListener('click', setMonthly);
  btnAnnual?.addEventListener('click', setAnnual);
</script>
